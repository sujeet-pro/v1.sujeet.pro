<!DOCTYPE html>
<html lang="en-IN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="Astro v2.3.0">
    
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#e4e7eb">
    <meta name="theme-color" content="#e4e7eb">
    <link rel="sitemap" href="/sitemap-index.xml">
    <link rel="canonical" href="https://sujeet.pro/blog/better-error-handling-in-javascript-typescript/">
    <title>Better Error Handling in JavaScript / Typescript</title>
<meta property="og:title" content="Better Error Handling in JavaScript / Typescript">
<meta property="og:url" content="https://sujeet.pro/blog/better-error-handling-in-javascript-typescript/">
<meta property="og:locale" content="en-IN">
<meta name="description" content="Making errors as first-class citizens in your async function response, inspired by Go.">
<meta property="og:description" content="Making errors as first-class citizens in your async function response, inspired by Go.">
<meta property="og:image" content="/_astro/sujeet-min.d86c8ef8.jpg">

      <meta property="og:type" content="article">
      <meta property="og:article:author" content="Sujeet Jaiswal">
    
<meta property="og:article:tag" content="JavaScript"><meta property="og:article:tag" content="TypeScript"><meta property="og:article:tag" content="Error Handling"><meta property="og:article:tag" content="Utility"><meta property="og:article:tag" content="web-development">
<meta property="og:article:published_time" content="2023-03-11T00:00:00.000Z">
<meta property="og:article:modified_time" content="2023-03-13T00:00:00.000Z">

<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@sujeetpro">
    <script>
  // On page load or when changing themes, best to add inline in `head` to avoid FOUC
  const isDark =
    localStorage.getItem("theme") === "dark" ||
    (!("theme" in localStorage) &&
      window.matchMedia("(prefers-color-scheme: dark)").matches);
  if (isDark) {
    document.documentElement.classList.add("dark");
  } else {
    document.documentElement.classList.remove("dark");
  }
</script>
  <link rel="stylesheet" href="/_astro/404.b3aba5c1.css" />
<link rel="stylesheet" href="/_astro/index.08e994f2.css" /><script type="module" src="/_astro/hoisted.2438215f.js"></script></head>
  <body class="min-h-screen overflow-x-hidden flex flex-col dark:bg-slate-900 bg-slate-50 dark:text-slate-300 text-slate-700">
    <header class="border-b border-slate-300 dark:border-slate-600 sticky top-0 z-50 drop-shadow-xl bg-slate-50 dark:bg-slate-900 dark:shadow-slate-900 shadow-slate-50 astro-ZMD4G2N6">
  <div class="max-w-screen-md w-full mx-auto px-4 flex justify-between astro-ZMD4G2N6">
    <nav class="astro-ZMD4G2N6">
      <ul class="flex gap-x-2.5 astro-ZMD4G2N6">
        <li class="astro-ZMD4G2N6">
          <a href="/" class="p-4 astro-ZMD4G2N6 inline-flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:home"><path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">
            Sujeet Jaiswal
          </span>
  
</a>
        </li>
        <li class="astro-ZMD4G2N6">
          <a href="/blog/" class="p-4 astro-ZMD4G2N6 inline-flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:blog"><path fill="currentColor" d="M3 3v18h18V3H3m15 15H6v-1h12v1m0-2H6v-1h12v1m0-4H6V6h12v6z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Blog</span>
  
</a>
        </li>
      </ul>
    </nav>
    <div class="flex items-center astro-ZMD4G2N6">
      <button disabled id="theme-switcher" class="p-2 w-12 h-12 astro-ZMD4G2N6" title="Toggle Theme">
        <span class="switch-to-dark-theme astro-ZMD4G2N6">
          <svg viewBox="0 0 32 32" class="astro-ZMD4G2N6" astro-icon="carbon:moon"><path fill="currentColor" d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194 11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016 13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555 1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38 1.015 1.015 0 0 0 14.98 3z"/></svg>
          <span class="sr-only astro-ZMD4G2N6">Switch to Dark Theme</span>
        </span>
        <span class="switch-to-light-theme astro-ZMD4G2N6">
          <svg viewBox="0 0 32 32" class="astro-ZMD4G2N6" astro-icon="carbon:sun"><path fill="currentColor" d="M16 12.005a4 4 0 1 1-4 4 4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6 6 6 0 0 0-6-6zM5.394 6.813l1.414-1.415 3.506 3.506L8.9 10.318zM2 15.005h5v2H2zM5.394 25.197 8.9 21.691l1.414 1.415-3.506 3.505zM15 25.005h2v5h-2zM21.687 23.106l1.414-1.415 3.506 3.506-1.414 1.414zM25 15.005h5v2h-5zM21.687 8.904l3.506-3.506 1.414 1.415-3.506 3.505zM15 2.005h2v5h-2z"/></svg>
          <span class="sr-only astro-ZMD4G2N6">Switch to Light Theme</span>
        </span>
      </button>
    </div>
  </div>
</header>
    <div class="flex-auto py-4 max-w-screen-md w-full mx-auto px-4">
      <main>
        
              <nav class="my-4">
  <ul class="flex flex-wrap items-center justify-start gap-2">
    <li class="flex items-center gap-2">
      <a href="/" class="inline-flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:home"><path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Home</span>
  
</a>
      <span role="presentation" class="text-slate-300 dark:text-slate-600">/</span>
    </li>
    <li class="flex items-center gap-2">
          <a href="/blog/" class="inline-flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Blog</span>
  
</a>
          <span role="presentation" class="text-slate-300 dark:text-slate-600">
            /
          </span>
        </li>
    <li class="max-w-full">
      <a href="/blog/better-error-handling-in-javascript-typescript/" aria-current="page" class="inline-flex items-center gap-1 underline-offset-4 decoration-double hover:underline max-w-full">
  
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Better Error Handling in JavaScript / Typescript</span>
  
</a>
    </li>
  </ul>
</nav>
              <article class="prose prose-xl prose-slate dark:prose-invert mx-auto my-8 text-justify w-full">
  
                
  
  
  <h1 class="text-center font-normal">Better Error Handling in JavaScript / Typescript</h1>
  <p class="text-3xl">Making errors as first-class citizens in your async function response, inspired by Go.</p>
  <p class="flex flex-col sm:flex-row justify-between italic font-thin">
    <span>First published on <time datetime="Sat Mar 11 2023">11 March 2023</time>.</span>
    <span>
          Last Updated on <time datetime="Mon Mar 13 2023">13 March 2023</time>.
        </span>
  </p>
  
  <h2 id="the-inspiration">The Inspiration<a aria-hidden="true" tabindex="-1" href="#the-inspiration"><span class="icon icon-link"></span></a></h2>
<p>When I was exploring Go, I came across function calls that returned the error alongside the result.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">fd, err </span><span style="color: #FF7B72">:=</span><span style="color: #C9D1D9"> os.</span><span style="color: #79C0FF">Open</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"test.go"</span><span style="color: #C9D1D9">)</span></span></code></pre>
<p>This motivates developers to account for errors at the beginning itself and not as an afterthought. This being available in the language construct is awesome. The closest thing we could do in javascript to simulate this is to return a tuple (technically an array), with both the result and the error.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">errorFirstFunctionSample</span><span style="color: #C9D1D9">()</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> [</span><span style="color: #FFA657">ResultType</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">ErrorType</span><span style="color: #C9D1D9">]</span></span>
<span class="line"><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">res</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">someApiCall</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> [res, </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">];</span></span>
<span class="line"><span style="color: #C9D1D9">  } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> (err) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">, err];</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>But it seemed tedious to refactor all of my code and even then how do we take care of functions from another package?</p>
<p>What if we could create some utility <code>withError</code> that does this conversion for us.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getAsyncData</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">options</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Options</span><span style="color: #C9D1D9">)</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">Result</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> promise_result_from_somewhere;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">getAsyncDataWithError</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">withError</span><span style="color: #C9D1D9">(getAsyncData);</span></span>
<span class="line"><span style="color: #8B949E">// Final Usages</span></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">result</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">err</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getAsyncDataWithError</span><span style="color: #C9D1D9">(options);</span></span></code></pre>
<h2 id="implementing-our-witherror">Implementing our <code>withError</code><a aria-hidden="true" tabindex="-1" href="#implementing-our-witherror"><span class="icon icon-link"></span></a></h2>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">withError</span><span style="color: #C9D1D9">&#x3C;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">E</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">F</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">...</span><span style="color: #FFA657">args</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> (</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">...</span><span style="color: #FFA657">args</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">[]</span></span>
<span class="line"><span style="color: #C9D1D9">  ) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">>(</span><span style="color: #FFA657">func</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">F</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">ctx</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">...</span><span style="color: #FFA657">args</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Parameters</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">F</span><span style="color: #C9D1D9">>) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">let</span><span style="color: #C9D1D9"> res</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">ReturnType</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">F</span><span style="color: #C9D1D9">> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">let</span><span style="color: #C9D1D9"> err</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">E</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      res </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> func.</span><span style="color: #D2A8FF">apply</span><span style="color: #C9D1D9">(ctx, args);</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> (error) {</span></span>
<span class="line"><span style="color: #C9D1D9">      err </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> error;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> [res, err] </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  };</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h2 id="an-example-use-case">An example use-case<a aria-hidden="true" tabindex="-1" href="#an-example-use-case"><span class="icon icon-link"></span></a></h2>
<p>To demonstrate how this utility is helpful, let us consider the below use case.</p>
<p>We want to show product recommendations to our users. The recommendation API needs user preference. For cases, when user preference is not available, we will use the trending API to show products. All the errors must be logged.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">type</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">UserPreference</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">type</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Product</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getUserPreferences</span><span style="color: #C9D1D9">()</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">UserPreference</span><span style="color: #C9D1D9">>;</span></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getRecommendedProducts</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">userPreference</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">UserPreference</span></span>
<span class="line"><span style="color: #C9D1D9">)</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">Product</span><span style="color: #C9D1D9">[]>;</span></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getTrendingProducts</span><span style="color: #C9D1D9">()</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Promise</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">Product</span><span style="color: #C9D1D9">[]>;</span></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">input</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">)</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">void</span><span style="color: #C9D1D9">;</span></span></code></pre>
<h3 id="implementation-using-our-witherror-utility">Implementation using our <code>withError</code> Utility<a aria-hidden="true" tabindex="-1" href="#implementation-using-our-witherror-utility"><span class="icon icon-link"></span></a></h3>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getProductsUsingWithError</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">userPref</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">prefError</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getUserPreferencesWithError</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (prefError) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(prefError);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">products</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">productErr</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> userPref</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getRecommendedProducts</span><span style="color: #C9D1D9">(userPref)</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getTrendingProductsWithError</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (productErr) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(productErr);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">throw</span><span style="color: #C9D1D9"> productErr;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> products;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h2 id="implementing-using-existing-methods">Implementing using existing methods<a aria-hidden="true" tabindex="-1" href="#implementing-using-existing-methods"><span class="icon icon-link"></span></a></h2>
<p>To keep the ground fair, I have implemented the above use case in existing approaches as well (callback, promises and regular try-catch block)</p>
<h3 id="implementation-using-callback">Implementation using Callback<a aria-hidden="true" tabindex="-1" href="#implementation-using-callback"><span class="icon icon-link"></span></a></h3>
<p>In the beginning, we had callbacks that received both the error and response. But this brought the problem of “callback hells” which were nested callbacks.</p>
<p>For this, let us assume all the above available functions also follow a callback structure (error-first, similar to node).</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getPageData</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">cb</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #FFA657">err</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">products</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Product</span><span style="color: #C9D1D9">[]) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">void</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">getUserPreferences</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">err</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">userPref</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">UserPreference</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (err1) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err1);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">getTrendingProducts</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">err2</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">products2</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (err2) {</span></span>
<span class="line"><span style="color: #C9D1D9">          </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err2);</span></span>
<span class="line"><span style="color: #C9D1D9">        }</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #D2A8FF">cb</span><span style="color: #C9D1D9">(err2, products2);</span></span>
<span class="line"><span style="color: #C9D1D9">      });</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">else</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">getRecommendedProducts</span><span style="color: #C9D1D9">(userPref, (</span><span style="color: #FFA657">err3</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">products3</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (err3) {</span></span>
<span class="line"><span style="color: #C9D1D9">          </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err3);</span></span>
<span class="line"><span style="color: #C9D1D9">        }</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #D2A8FF">cb</span><span style="color: #C9D1D9">(err3, products3);</span></span>
<span class="line"><span style="color: #C9D1D9">      });</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  });</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h3 id="implementation-using-promises">Implementation using Promises<a aria-hidden="true" tabindex="-1" href="#implementation-using-promises"><span class="icon icon-link"></span></a></h3>
<p>With the introduction of promises, we got chainable <code>.catch</code> apart from <code>.then</code> and <code>.finally</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getProductsUsingPromises</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getUserPreferences</span><span style="color: #C9D1D9">()</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">userPref</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getRecommendedProducts</span><span style="color: #C9D1D9">(userPref);</span></span>
<span class="line"><span style="color: #C9D1D9">    })</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">catch</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">err</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getTrendingProducts</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    })</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">catch</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">err</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Promise</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">reject</span><span style="color: #C9D1D9">(err);</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>This though has a mental overhead of distinguishing which code runs in sequence and which at a later point in time.</p>
<blockquote>
<p><strong>Did you notice</strong>, in the above implementation <code>getTrendingProducts</code> will be called when either of <code>getUserPreferences</code> OR <code>getRecommendedProducts</code> fails.</p>
</blockquote>
<h3 id="implementation-using-async--await-with-try--catch-block">Implementation using Async -Await with Try / Catch Block<a aria-hidden="true" tabindex="-1" href="#implementation-using-async--await-with-try--catch-block"><span class="icon icon-link"></span></a></h3>
<p>Async Await made it easier to reason with the sequence of execution, especially when you don’t care about the intermediate errors.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getProductsWithoutHandlingErrors</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">userPref</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getUserPreferences</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getRecommendedProducts</span><span style="color: #C9D1D9">(userPref);</span></span>
<span class="line"><span style="color: #C9D1D9">  } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getTrendingProducts</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>But, if we come to our use case, and start handling errors of intermediate calls, we will have a sequence of try-catch blocks.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getProductsUsingTryCatch</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">userPref</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getUserPreferences</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">products</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getRecommendedProducts</span><span style="color: #C9D1D9">(userPref);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> products;</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> (err2) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err2);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">throw</span><span style="color: #C9D1D9"> err2;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> (err1) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err1);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">products</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getTrendingProducts</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> products;</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> (err3) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">logger</span><span style="color: #C9D1D9">(err3);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">throw</span><span style="color: #C9D1D9"> err3;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p><em>And now, I feel, the promise chaining was better than this, at least in terms of readability. If we ignore the problem of calling trending products when recommendations fail (It might be valid for this example use case anyways)</em></p>
<h2 id="last-words">Last Words<a aria-hidden="true" tabindex="-1" href="#last-words"><span class="icon icon-link"></span></a></h2>
<p>Based on my experience, the error-first approach using the withError utility method is much easier to work with. Additionally, your implementation of methods can continue to throw errors as a standard.</p>
<h3 id="what-about-sync-function">What about Sync Function?<a aria-hidden="true" tabindex="-1" href="#what-about-sync-function"><span class="icon icon-link"></span></a></h3>
<p>The above example only showed the use case for async operation but would work with sync functions as well. We would need to modify the types and remove async and await from the inner function.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">withErrorSync</span><span style="color: #C9D1D9">&#x3C;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">E</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">F</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">...</span><span style="color: #FFA657">args</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">...</span><span style="color: #FFA657">args</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">[]) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span></span>
<span class="line"><span style="color: #C9D1D9">>(</span><span style="color: #FFA657">func</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">F</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">ctx</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">unknown</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">...</span><span style="color: #FFA657">args</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Parameters</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">F</span><span style="color: #C9D1D9">>) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">let</span><span style="color: #C9D1D9"> res</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">ReturnType</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">F</span><span style="color: #C9D1D9">> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">let</span><span style="color: #C9D1D9"> err</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">E</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">try</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      res </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> func.</span><span style="color: #D2A8FF">apply</span><span style="color: #C9D1D9">(ctx, args);</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">catch</span><span style="color: #C9D1D9"> (error) {</span></span>
<span class="line"><span style="color: #C9D1D9">      err </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> error;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> [res, err] </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  };</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h3 id="the-ideal-order-of-result-and-error-in-the-tuple">The Ideal order of result and error in the tuple<a aria-hidden="true" tabindex="-1" href="#the-ideal-order-of-result-and-error-in-the-tuple"><span class="icon icon-link"></span></a></h3>
<p>The intention behind this exploration is to find ways to ensure we as developers take care of errors.</p>
<p>If you want node-like ordering (<code>error, res</code>), error-first makes sense.
For me, since the inspiration was from Go, and it uses <code>res, err</code> ordering, I stick with that in the article.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">res</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">error</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">somefunction</span><span style="color: #C9D1D9">(); </span><span style="color: #8B949E">// Go Like</span></span>
<span class="line"><span style="color: #8B949E">// OR</span></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">error</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">res</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">somefunction</span><span style="color: #C9D1D9">(); </span><span style="color: #8B949E">// Node like</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E">// Both are cool!</span></span></code></pre>

              
</article>
              
            
      </main>
    </div>
    <footer class="border-t border-slate-300 dark:border-slate-600 py-6">
  <nav class="flex flex-col sm:flex-row justify-between divider-x-2 max-w-screen-md w-full mx-auto px-4">
    <ul>
          <li class="font-bold mb-2">Social</li>
          <li>
              <a href="https://sujeet.pro/in" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:linkedin"><path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">LinkedIn</span>
  
</a>
            </li><li>
              <a href="https://sujeet.pro/twitter" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:twitter"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Twitter</span>
  
</a>
            </li><li>
              <a href="https://sujeet.pro/cv" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 256 256" class="inline-block w-4 h-4" astro-icon="ph:file-doc"><path fill="currentColor" d="M58 160H44a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h14a32 32 0 0 0 0-64zm0 48h-6v-32h6a16 16 0 0 1 0 32zm72-48c-16.5 0-30 14.4-30 32s13.5 32 30 32 30-14.4 30-32-13.5-32-30-32zm0 48c-7.7 0-14-7.2-14-16s6.3-16 14-16 14 7.2 14 16-6.3 16-14 16zm87.9-2.8a8 8 0 0 1-.5 11.3A29.3 29.3 0 0 1 198 224c-16.5 0-30-14.4-30-32s13.5-32 30-32a29.3 29.3 0 0 1 19.4 7.5 8 8 0 0 1 .5 11.3 7.9 7.9 0 0 1-11.3.6 12.9 12.9 0 0 0-8.6-3.4c-7.7 0-14 7.2-14 16s6.3 16 14 16a12.9 12.9 0 0 0 8.6-3.4 7.9 7.9 0 0 1 11.3.6zM48 136a8 8 0 0 0 8-8V40h88v48a8 8 0 0 0 8 8h48v32a8 8 0 0 0 16 0V88a7.8 7.8 0 0 0-2.4-5.7l-55.9-56A8.1 8.1 0 0 0 152 24H56a16 16 0 0 0-16 16v88a8 8 0 0 0 8 8zm112-84.7L188.7 80H160z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">CV</span>
  
</a>
            </li>
        </ul><ul>
          <li class="font-bold mb-2">Community</li>
          <li>
              <a href="https://sujeet.pro/hashnode" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="simple-icons:hashnode"><path fill="currentColor" d="m22.351 8.019-6.37-6.37a5.63 5.63 0 0 0-7.962 0l-6.37 6.37a5.63 5.63 0 0 0 0 7.962l6.37 6.37a5.63 5.63 0 0 0 7.962 0l6.37-6.37a5.63 5.63 0 0 0 0-7.962zM12 15.953a3.953 3.953 0 1 1 0-7.906 3.953 3.953 0 0 1 0 7.906z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Hashnode</span>
  
</a>
            </li><li>
              <a href="https://sujeet.pro/gh" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:github"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Github</span>
  
</a>
            </li><li>
              <a href="https://sujeet.pro/stackoverflow" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:stackoverflow"><path fill="currentColor" d="M17.36 20.2v-5.38h1.79V22H3v-7.18h1.8v5.38h12.56M6.77 14.32l.37-1.76 8.79 1.85-.37 1.76-8.79-1.85m1.16-4.21.76-1.61 8.14 3.78-.76 1.62-8.14-3.79m2.26-3.99 1.15-1.38 6.9 5.76-1.15 1.37-6.9-5.75m4.45-4.25L20 9.08l-1.44 1.07-5.36-7.21 1.44-1.07M6.59 18.41v-1.8h8.98v1.8H6.59z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Stackoverflow</span>
  
</a>
            </li>
        </ul><ul>
          <li class="font-bold mb-2">Site</li>
          <li>
              <a href="/project/" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:responsive"><path fill="currentColor" d="M4 6v10h5v-4a2 2 0 0 1 2-2h5a2 2 0 0 1 2 2v4h2V6H4M0 20v-2h4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h4v2h-6a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2H0m11.5 0a.5.5 0 0 0-.5.5.5.5 0 0 0 .5.5.5.5 0 0 0 .5-.5.5.5 0 0 0-.5-.5m4 0a.5.5 0 0 0-.5.5.5.5 0 0 0 .5.5.5.5 0 0 0 .5-.5.5.5 0 0 0-.5-.5M13 20v1h1v-1h-1m-2-8v7h5v-7h-5z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Projects</span>
  
</a>
            </li><li>
              <a href="/profile/skills/" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  <svg viewBox="0 0 32 32" class="inline-block w-4 h-4" astro-icon="carbon:skill-level-advanced"><path fill="currentColor" d="M30 30h-8V4h8zM20 30h-8V12h8zM10 30H2V18h8z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Skill</span>
  
</a>
            </li><li>
              <a href="/page/faq/" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline">
  <svg viewBox="0 0 26 26" class="inline-block w-4 h-4" astro-icon="wpf:faq"><path fill="currentColor" d="M13 0c-1.7 0-3 1.3-3 3v6c0 1.7 1.3 3 3 3h6l4 4v-4c1.7 0 3-1.3 3-3V3c0-1.7-1.3-3-3-3H13zm4.188 3h1.718l1.688 6h-1.5l-.407-1.5h-1.5L16.813 9H15.5l1.688-6zM18 4c-.1.4-.212.888-.313 1.188l-.28 1.312h1.187l-.282-1.313C18.113 4.888 18 4.4 18 4zM3 10c-1.7 0-3 1.3-3 3v6c0 1.7 1.3 3 3 3v4l4-4h6c1.7 0 3-1.3 3-3v-6h-3c-1.9 0-3.406-1.3-3.906-3H3zm4.594 2.906c1.7 0 2.5 1.4 2.5 3 0 1.4-.481 2.288-1.281 2.688.4.2.874.306 1.374.406l-.374 1c-.7-.2-1.426-.512-2.126-.813-.1-.1-.275-.093-.375-.093C6.112 18.994 5 18 5 16c0-1.7.994-3.094 2.594-3.094zm0 1.094c-.8 0-1.188.9-1.188 2 0 1.2.388 2 1.188 2 .8 0 1.218-.9 1.218-2s-.418-2-1.218-2z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">FAQs</span>
  
</a>
            </li><li>
              <a href="/sitemap-index.xml" class="py-3 flex items-center gap-1 underline-offset-4 decoration-double hover:underline" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 24 24" class="inline-block w-4 h-4" astro-icon="mdi:sitemap"><path fill="currentColor" d="M9 2v6h2v3H5c-1.11 0-2 .89-2 2v3H1v6h6v-6H5v-3h6v3H9v6h6v-6h-2v-3h6v3h-2v6h6v-6h-2v-3c0-1.11-.89-2-2-2h-6V8h2V2H9z"/></svg>
  <span class="w-full overflow-hidden text-ellipsis whitespace-nowrap">Site Map</span>
  
</a>
            </li>
        </ul>
  </nav>
  <p class="text-center mt-4">&copy; 2023 Sujeet Jaiswal</p>
</footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1Z2TP5LG65"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-1Z2TP5LG65");
</script>
  </body></html>