---
import { Icon } from "astro-icon";
import { classNameMuted } from "../../constants/classnames";
import { organizationMap, OrgKeys } from "../../constants/organization";

type Props = {
  company: OrgKeys;
  department: string;
  role: string;
  designation?: string;
  startDate: string;
  endDate?: string;
};
const { company, department, role, designation, startDate, endDate } =
  Astro.props as Props;
const companyDetails = organizationMap[company];
---

<div class="company-details grid gap-x-3 gap-y-2">
  <Icon class="w-40 h-20 company-icon" name={companyDetails.icon} />
  <h3 class="company-designation text-2xl text-left m-0">
    {role} / {designation}
  </h3>
  <span class="company-name text-lg">
    <a
      href={companyDetails.linkedInUrl}
      target="_blank"
      rel="noopener noreferrer">{company}</a
    >
    {
      department ? (
        <span class:list={[classNameMuted]}>({department})</span>
      ) : null
    }
  </span>
  <span class:list={["company-duration font-light", classNameMuted]}>
    {
      endDate ? (
        <>
          <time datetime={startDate}>{startDate}</time> -
          <time datetime={endDate}>{endDate}</time>
        </>
      ) : (
        <>
          Since <time datetime={startDate}>{startDate}</time>
        </>
      )
    }
  </span>
</div>

<style>
  .company-details {
    grid-template-columns: 1fr;
    grid-template-areas: "icon" "designation" "company" "duration";
  }
  @media (min-width: 600px) {
    .company-details {
      grid-template-columns: 1fr min-content;
      grid-template-areas: "designation icon" "company icon" "duration icon";
    }
  }
  .company-icon {
    grid-area: icon;
  }
  .company-name {
    grid-area: company;
  }
  .company-designation {
    grid-area: designation;
  }
  .company-duration {
    grid-area: duration;
  }
</style>
